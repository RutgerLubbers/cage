# Example user presets for cage
# Place this file at ~/.config/cage/presets.yaml
#
# Simplified model:
# - deny: blocks read + write; 'except' restores READ-ONLY access
# - allow: grants read + write access
# - read: grants read-only access (only with strict: true)

presets:
  # ==========================================================================
  # AI Coder preset - comprehensive development environment
  # ==========================================================================
  # This preset extends builtin:secure which already includes all language
  # presets (npm, cargo, java, go). Add any additional tools here.
  #
  # Usage: cage --preset ai-coder -- claude
  # ==========================================================================
  ai-coder:
    extends:
      - "builtin:secure"
    allow:
      # Additional AI tool paths not in builtin:secure
      - "$HOME/.aider"
      - "$HOME/.copilot"
      - "$HOME/.github-copilot"
    allow-keychain: true
    allow-git: true

  # ==========================================================================
  # Language-specific presets (additive - use with builtin:secure)
  # ==========================================================================
  # Note: These are examples showing how to extend builtins.
  # builtin:secure already includes npm, cargo, java, and go presets.
  # ==========================================================================
  
  # Python development
  python:
    allow:
      - "."
      - "$HOME/.pyenv"
      - "$HOME/.cache/pip"
      - "$HOME/.local"
      - "$HOME/.virtualenvs"
      - "$HOME/Library/Caches/pip"
      - "venv"
      - ".venv"

  # Ruby development  
  ruby:
    allow:
      - "."
      - "$HOME/.gem"
      - "$HOME/.bundle"
      - "$HOME/.rbenv"
      - "$HOME/.rvm"

  # Homebrew (macOS/Linux)
  homebrew:
    allow:
      - "."
      - "/usr/local/Homebrew"
      - "/opt/homebrew"
      - "$HOME/Library/Caches/Homebrew"
      - "$HOME/Library/Logs/Homebrew"

  # ==========================================================================
  # Tool-specific presets
  # ==========================================================================

  # Claude Code specific paths
  claude-code:
    allow:
      - "."
      - "/tmp"
      - "/private/tmp"
      - "/dev/tty"
      - "$HOME/.claude"
      - "$HOME/.claude.json"
      - "$HOME/.claude.json.backup"
      - "$HOME/.claude.json.lock"
      - "$HOME/.claude.lock"
    allow-keychain: true
    allow-git: true

  # ==========================================================================
  # Custom secure presets - examples of different approaches
  # ==========================================================================

  # Example: Using the deny + except + allow model
  # deny: blocks $HOME (read + write)
  # except: restores read-only access to safe directories
  # allow: grants read + write to specific paths
  my-secure:
    extends:
      - "builtin:strict-base"
    deny:
      - path: "$HOME"
        except:
          # Read-only access (via except)
          - "$HOME/Developer"
          - "$HOME/Projects"
          - "$HOME/.gitconfig"
          - "$HOME/.zshrc"
    allow:
      # Read + write access (via allow)
      - "."
      - "$HOME/.claude"
      - "$HOME/.cache"
    allow-git: true

  # Example: Minimal development preset
  secure-dev:
    extends:
      - "builtin:strict-base"
      - "builtin:secure-home"
    allow:
      - "."
      - "$HOME/.cache"

  # Example: Strict npm development
  strict-npm:
    extends:
      - "builtin:strict-base"
      - "builtin:secure-home"
      - "builtin:npm"

  # ==========================================================================
  # ALTERNATIVE APPROACH: Allowlist-based home protection
  # ==========================================================================
  # Instead of denying $HOME and carving out exceptions (denylist),
  # you can use strict mode with explicit read paths (allowlist).
  #
  # Pros: Very explicit about what's readable
  # Cons: Must add new directories manually as needed
  #
  # This is an alternative to builtin:secure-home for users who prefer
  # the allowlist approach.
  # ==========================================================================
  
  safe-home-allowlist:
    extends:
      - "builtin:strict-base"
    read:
      # Safe home directories (read-only)
      - "$HOME/Code"
      - "$HOME/Desktop"
      - "$HOME/Developer"
      - "$HOME/Documents"
      - "$HOME/Downloads"
      - "$HOME/Movies"
      - "$HOME/Music"
      - "$HOME/Pictures"
      - "$HOME/Projects"
      - "$HOME/Videos"
      - "$HOME/src"
      - "$HOME/workspace"
      - "$HOME/go/src"
      # Shell configs (read-only)
      - "$HOME/.bashrc"
      - "$HOME/.zshrc"
      - "$HOME/.profile"
      - "$HOME/.config/fish"
      - "$HOME/.config/starship.toml"
      # Git config (read-only)
      - "$HOME/.gitconfig"
      - "$HOME/.config/git"
      # Editor configs (read-only)
      - "$HOME/.vimrc"
      - "$HOME/.config/nvim"

  # Example using the allowlist approach
  secure-allowlist:
    extends:
      - "safe-home-allowlist"
    allow:
      - "."
      - "$HOME/.cache"
      - "$HOME/.claude"
    allow-git: true
